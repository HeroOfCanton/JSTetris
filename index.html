<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
<html lang="en"> 
  	<head>
	    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
	    <meta content="utf-8" http-equiv="encoding" />
	    <title>Tetris</title>

	    <!-- THIS FIRST -->
	    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	    <!-- Optional theme -->
	    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

	    <script src="jquery-1.11.2.min.js"></script> <!-- 1 - JQUERY -->
	    <script src="pixi.js"></script>
	    <script src="tetris.js"></script>
	    
	    <script type="text/javascript">
      	$(document).ready(function(e){
        	$("#scoreboard").load("highscore_controller.php");
      	});

      	$(document).on("click", "#startgame", function(e){
      		$("#tetris").html("");
        	$("#tetris").load(tetrisController());
      	});
	    </script>

  	</head>
	<body style="padding-top: 70px;">

	<div class="container">
    	<div class="jumbotron">
    		<div align="center">  
      			<h2>TETRIS in Pixi.js</h2>
    		</div>
  		</div>
	</div>

  <div class="container">
  	<div class="row">
  		<div class="col-sm-8 text-center">
  			<button class="btn btn-primary" type="button" id="startgame">Start New Game</button>
				<div id="tetris" style="padding-top: 10px;">
				</div>
			</div> <!--col-sm-8-->
			
			<div class = "col-sm-4 text-center">
				<div id="scoreboard">
				</div>
			</div> <!--col-sm-4-->
		</div> <!--row-->
	</div> <!--container-->
    <script>
		eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('r 2e(){h 1a=10;h 13=20;h D=24;h 2g=D*5;h 1v=1a*D;h 1t=13*D;h O=E 14.2c();h 12=14.2d(1v,1t);2f.2m("2u").2v(12.2p);h k=0;h 1D=[\'t\',\'l\',\'j\',\'z\',\'s\',\'i\',\'q\'];h L=0;h T=E 14.1V(L.C(),{1Q:W});O.1s(T);T.x=10;T.y=10;h 1p=N;h u=E P(13);p(h i=0;i<13;i++){u[i]=E P(1a)}h 8=E P();1m(R);12.1q(O);2a(X);r o(x,y,1h){h w=E 14.22();w.21(1h);w.1Z(2,1X);w.Q.1d(x*D,y*D);w.1Y(0,0,D,D);u[y][x]=w;O.1s(w);B w}r 1i(1e,1z){B 1x.25(1x.1i()*(1z-1e)+1e)}r 1m(1h){v=1D[1i(0,7)];d(v===\'z\'){d(!f(5,1)||!f(4,1)||!f(4,2)||!f(5,0)){I()}n{8=[o(5,1,R),o(4,1,R),o(4,2,R),o(5,0,R)]}}n d(v===\'s\'){d(!f(4,1)||!f(5,1)||!f(5,2)||!f(4,0)){I()}n{8=[o(4,1,15),o(5,1,15),o(5,2,15),o(4,0,15)]}}n d(v===\'t\'){d(!f(5,0)||!f(4,0)||!f(6,0)||!f(5,1)){I()}n{8=[o(5,0,K),o(4,0,K),o(6,0,K),o(5,1,K)]}}n d(v===\'q\'){d(!f(4,0)||!f(4,1)||!f(5,0)||!f(5,1)){I()}n{8=[o(4,0,1b),o(4,1,1b),o(5,0,1b),o(5,1,1b)]}}n d(v===\'i\'){d(!f(5,2)||!f(5,0)||!f(5,1)||!f(5,3)){I()}n{8=[o(5,2,18),o(5,0,18),o(5,1,18),o(5,3,18)]}}n d(v===\'j\'){d(!f(5,1)||!f(6,0)||!f(5,0)||!f(5,2)){I()}n{8=[o(5,1,1c),o(6,0,1c),o(5,0,1c),o(5,2,1c)]}}n d(v===\'l\'){d(!f(5,1)||!f(4,0)||!f(5,0)||!f(5,2)){I()}n{8=[o(5,1,W),o(4,0,W),o(5,0,W),o(5,2,W)]}}n{d(!f(5,0)||!f(4,0)||!f(6,0)||!f(5,1)){I()}n{v=\'t\';8=[o(5,0,K),o(4,0,K),o(6,0,K),o(5,1,K)]}}k=0}r f(x,y){d(x<0||y<0||x>=1a||y>=13)B Z;d(1J u[y][x]===\'19\')B N;n B Z}r c(w){B w.Q.x/D}r 9(w){B w.Q.y/D}r 2l(w,x){w.Q.x=x*D}r 2r(w,y){w.Q.y=y*D}r g(1f,1j,Y,11){u[11][Y]=u[1j][1f];u[1j][1f]=19;u[11][Y].Q.x=Y*D;u[11][Y].Q.y=11*D}r 1o(){d(v===\'q\')B;d(v===\'t\'){d(k===0){d(f(c(8[0]),9(8[0])-1)){g(c(8[0])+1,9(8[0]),c(8[0]),9(8[0])-1);k=1}}n d(k===1){d(f(c(8[0])+1,9(8[0]))){g(c(8[0]),9(8[0])+1,c(8[0])+1,9(8[0]));k=2}}n d(k===2){d(f(c(8[0]),9(8[0])+1)){g(c(8[0])-1,9(8[0]),c(8[0]),9(8[0])+1);k=3}}n d(k===3){d(f(c(8[0])-1,9(8[0]))){g(c(8[0]),9(8[0])-1,c(8[0])-1,9(8[0]));k=0}}}d(v===\'s\'){d(k===0){d(f(c(8[0])-1,9(8[0])+1)&&f(c(8[0]),9(8[0])+1)){g(c(8[0])+1,9(8[0])+1,c(8[0])-1,9(8[0])+1);g(c(8[0])+1,9(8[0]),c(8[0]),9(8[0])+1);g(c(8[0]),9(8[0])-1,c(8[0])+1,9(8[0]));k=1}}n d(k===1){d(f(c(8[0])-1,9(8[0])-1)&&f(c(8[0])-1,9(8[0]))){g(c(8[0])-1,9(8[0])+1,c(8[0])-1,9(8[0])-1);g(c(8[0]),9(8[0])+1,c(8[0])-1,9(8[0]));g(c(8[0])+1,9(8[0]),c(8[0]),9(8[0])+1);k=2}}n d(k===2){d(f(c(8[0])+1,9(8[0])-1)&&f(c(8[0]),9(8[0])-1)){g(c(8[0])-1,9(8[0])-1,c(8[0])+1,9(8[0])-1);g(c(8[0])-1,9(8[0]),c(8[0]),9(8[0])-1);g(c(8[0]),9(8[0])+1,c(8[0])-1,9(8[0]));k=3}}n d(k===3){d(f(c(8[0])+1,9(8[0])+1)&&f(c(8[0])+1,9(8[0]))){g(c(8[0])+1,9(8[0])-1,c(8[0])+1,9(8[0])+1);g(c(8[0]),9(8[0])-1,c(8[0])+1,9(8[0]));g(c(8[0])-1,9(8[0]),c(8[0]),9(8[0])-1);k=0}}}d(v===\'z\'){d(k===0){d(f(c(8[0])-1,9(8[0])-1)&&f(c(8[0])+1,9(8[0]))){g(c(8[0])-1,9(8[0])+1,c(8[0])-1,9(8[0])-1);g(c(8[0]),9(8[0])-1,c(8[0])+1,9(8[0]));g(c(8[0])-1,9(8[0]),c(8[0]),9(8[0])-1);k=1}}n d(k===1){d(f(c(8[0])+1,9(8[0])-1)&&f(c(8[0]),9(8[0])+1)){g(c(8[0])-1,9(8[0])-1,c(8[0])+1,9(8[0])-1);g(c(8[0])+1,9(8[0]),c(8[0]),9(8[0])+1);g(c(8[0]),9(8[0])-1,c(8[0])+1,9(8[0]));k=2}}n d(k===2){d(f(c(8[0])+1,9(8[0])+1)&&f(c(8[0])-1,9(8[0]))){g(c(8[0])+1,9(8[0])-1,c(8[0])+1,9(8[0])+1);g(c(8[0]),9(8[0])+1,c(8[0])-1,9(8[0]));g(c(8[0])+1,9(8[0]),c(8[0]),9(8[0])+1);k=3}}n d(k===3){d(f(c(8[0])-1,9(8[0])+1)&&f(c(8[0]),9(8[0])-1)){g(c(8[0])+1,9(8[0])+1,c(8[0])-1,9(8[0])+1);g(c(8[0])-1,9(8[0]),c(8[0]),9(8[0])-1);g(c(8[0]),9(8[0])+1,c(8[0])-1,9(8[0]));k=0}}}d(v===\'i\'){d(k===0){d(f(c(8[0])+1,9(8[0]))&&f(c(8[0])-1,9(8[0]))&&f(c(8[0])-2,9(8[0]))){g(c(8[0]),9(8[0])+1,c(8[0])+1,9(8[0]));g(c(8[0]),9(8[0])-1,c(8[0])-1,9(8[0]));g(c(8[0]),9(8[0])-2,c(8[0])-2,9(8[0]));k=1}}n d(k===1){d(f(c(8[0]),9(8[0])+1)&&f(c(8[0]),9(8[0])-1)&&f(c(8[0]),9(8[0])-2)){g(c(8[0])+1,9(8[0]),c(8[0]),9(8[0])+1);g(c(8[0])-1,9(8[0]),c(8[0]),9(8[0])-1);g(c(8[0])-2,9(8[0]),c(8[0]),9(8[0])-2);k=0}}}d(v===\'j\'){d(k===0){d(f(c(8[0])+1,9(8[0]))&&f(c(8[0])-1,9(8[0]))&&f(c(8[0])+1,9(8[0])+1)){g(c(8[0]),9(8[0])+1,c(8[0])+1,9(8[0]));g(c(8[0]),9(8[0])-1,c(8[0])-1,9(8[0]));g(c(8[0])+1,9(8[0])-1,c(8[0])+1,9(8[0])+1);k=1}}n d(k===1){d(f(c(8[0]),9(8[0])+1)&&f(c(8[0]),9(8[0])-1)&&f(c(8[0])-1,9(8[0])+1)){g(c(8[0])+1,9(8[0]),c(8[0]),9(8[0])+1);g(c(8[0])-1,9(8[0]),c(8[0]),9(8[0])-1);g(c(8[0])+1,9(8[0])+1,c(8[0])-1,9(8[0])+1);k=2}}n d(k===2){d(f(c(8[0])+1,9(8[0]))&&f(c(8[0])-1,9(8[0]))&&f(c(8[0])-1,9(8[0])-1)){g(c(8[0]),9(8[0])+1,c(8[0])+1,9(8[0]));g(c(8[0]),9(8[0])-1,c(8[0])-1,9(8[0]));g(c(8[0])-1,9(8[0])+1,c(8[0])-1,9(8[0])-1);k=3}}n d(k===3){d(f(c(8[0]),9(8[0])+1)&&f(c(8[0]),9(8[0])-1)&&f(c(8[0])+1,9(8[0])-1)){g(c(8[0])+1,9(8[0]),c(8[0]),9(8[0])+1);g(c(8[0])-1,9(8[0]),c(8[0]),9(8[0])-1);g(c(8[0])-1,9(8[0])-1,c(8[0])+1,9(8[0])-1);k=0}}}d(v===\'l\'){d(k===0){d(f(c(8[0])+1,9(8[0]))&&f(c(8[0])-1,9(8[0]))&&f(c(8[0])+1,9(8[0])-1)){g(c(8[0]),9(8[0])+1,c(8[0])+1,9(8[0]));g(c(8[0]),9(8[0])-1,c(8[0])-1,9(8[0]));g(c(8[0])-1,9(8[0])-1,c(8[0])+1,9(8[0])-1);k=1}}n d(k===1){d(f(c(8[0]),9(8[0])+1)&&f(c(8[0]),9(8[0])-1)&&f(c(8[0])+1,9(8[0])+1)){g(c(8[0])+1,9(8[0]),c(8[0]),9(8[0])+1);g(c(8[0])-1,9(8[0]),c(8[0]),9(8[0])-1);g(c(8[0])+1,9(8[0])-1,c(8[0])+1,9(8[0])+1);k=2}}n d(k===2){d(f(c(8[0])+1,9(8[0]))&&f(c(8[0])-1,9(8[0]))&&f(c(8[0])-1,9(8[0])+1)){g(c(8[0]),9(8[0])+1,c(8[0])+1,9(8[0]));g(c(8[0]),9(8[0])-1,c(8[0])-1,9(8[0]));g(c(8[0])+1,9(8[0])+1,c(8[0])-1,9(8[0])+1);k=3}}n d(k===3){d(f(c(8[0]),9(8[0])+1)&&f(c(8[0]),9(8[0])-1)&&f(c(8[0])-1,9(8[0])-1)){g(c(8[0])+1,9(8[0]),c(8[0]),9(8[0])+1);g(c(8[0])-1,9(8[0]),c(8[0]),9(8[0])-1);g(c(8[0])-1,9(8[0])+1,c(8[0])-1,9(8[0])-1);k=0}}}}r 1w(a,b){B a-b}r 17(a,b){B b-a}r 1F(){h m={};p(h i=0;i<8.H;++i){d(m.G(9(8[i]).C())){m[9(8[i]).C()].M(c(8[i]))}n{m[9(8[i]).C()]=E P();m[9(8[i]).C()].M(c(8[i]))}}h F=N;p(h A J m){d(m.G(A)){m[A].16(1w);F=f(m[A][0]-1,A);d(!F)B}}d(F){p(h y J m){d(m.G(y)){p(h x J m[y]){g(m[y][x],y,m[y][x]-1,y)}}}}}r 1u(){h m={};p(h i=0;i<8.H;++i){d(m.G(9(8[i]).C())){m[9(8[i]).C()].M(c(8[i]))}n{m[9(8[i]).C()]=E P();m[9(8[i]).C()].M(c(8[i]))}}h F=N;p(h A J m){d(m.G(A)){m[A].16(17);F=f(m[A][0]+1,A);d(!F)B}}d(F){p(h y J m){d(m.G(y)){p(h x J m[y]){g(m[y][x],y,m[y][x]+1,y)}}}}}r 1n(){h m={};p(h i=0;i<8.H;++i){d(m.G(c(8[i]).C())){m[c(8[i]).C()].M(9(8[i]))}n{m[c(8[i]).C()]=E P();m[c(8[i]).C()].M(9(8[i]))}}h F=N;p(h A J m){d(m.G(A)){m[A].16(17);F=f(A,m[A][0]+1);d(!F)B Z}}d(F){p(h x J m){d(m.G(x)){p(h y J m[x]){g(x,m[x][y],x,m[x][y]+1)}}}}B N}r 1r(){h 1d=E 1A();p(h i=0;i<8.H;++i){1d.1I(9(8[i]))}h 1g=E 1A();p(1G y 1H 1d){h 1k=N;p(h i=0;i<u[y].H;++i){d(1J u[y][i]===\'19\'){1k=Z}}d(1k)1g.1I(y)}h S=E P();p(1G y 1H 1g){p(h i=0;i<u[y].H;++i){O.2t(u[y][i]);u[y][i]=19}S.M(y)}L+=28*S.H;T.1y=L.C();S.16(17);p(h i=S[0];i>=0;--i){p(h j=0;j<u[i].H;++j){d(!f(j,i)){g(c(u[i][j]),9(u[i][j]),c(u[i][j]),9(u[i][j])+S.H)}}}}23.29("2b",r(e){e.2n();d(e.U===2w){1o()}d(e.U===2h){1F()}d(e.U===2j){1o()}d(e.U===1S){1u()}d(e.U===2i){1n()}12.1q(O)});r X(){h 1l=1C(X,1B);d(!1n()){2k(1l);1r();1m(R);1l=1C(X,1B)}12.1q(O)};r I(){2s(X);h 1E=$("#2o").1y();d(L>1E){d(1p){1p=Z;h V=27("~1U 1T 1R!~\\1P 1O V");d(V){$("#1K").1L("1M.1N?26="+V+"&L="+L)}n{1W("2q V!")}}}}};',62,157,'||||||||piece|getY|||getX|if||isEmpty|moveRectangle|var|||orientation||coords|else|addRectangle|for||function|||grid|shape|rectangle||||key|return|toString|SPRITE_WIDTH|new|empty|hasOwnProperty|length|endgame|in|0x0000ff|score|push|true|stage|Array|position|0xff0000|clearedArray|scoreString|keyCode|initials|0xffffff|animate|x2|false||y2|renderer|GRID_HEIGHT|PIXI|0x00ff00|sort|compareNumbersReverse|0xff00ff|undefined|GRID_WIDTH|0x00ffff|0xffff00|set|min|x1|clearedSet|color|random|y1|clear|myTimer|newPiece|drop|rotatePiece|showprompt|render|checkClear|addChild|CANVAS_HEIGHT|moveRight|CANVAS_WIDTH|compareNumbers|Math|text|max|Set|1000|setTimeout|shapes|lowest_score|moveLeft|let|of|add|typeof|scoreboard|load|highscore_controller|php|your|nEnter|fill|SCORE|39|HIGH|NEW|Text|alert|0x000000|drawRect|lineStyle||beginFill|Graphics|window||round|init|prompt|100|addEventListener|requestAnimationFrame|keydown|Container|autoDetectRenderer|tetrisController|document|SCOREBOARD_WIDTH|37|40|38|clearTimeout|setX|getElementById|preventDefault|lowest|view|no|setY|cancelAnimationFrame|removeChild|tetris|appendChild|32'.split('|'),0,{}))

    </script>
	</body>
</html>
